<div *ngIf="artist$ | async as artist">
    <app-toolbar
            [title]="artist.name"
            [showSearchButton]="true"
            [showBackButton]="true"
            [image]="artist.images.horizontal.low"
            (searchKeyUp)="setFilter($event.target.value)"
    ></app-toolbar>

    <app-flat-card-with-image
            [title]="artist.name"
            [text]="artist.text"
            [image]="artist.images.vertical ? artist.images.vertical.low : artist.images.horizontal.low"
            secondaryButtonText="Visit website"
            [secondaryButtonExternalLink]="artist.website"
    ></app-flat-card-with-image>

    <div *ngIf="pieces$ | async as pieces">
        <div *ngFor="let piece of filterPieces(pieces$ | async)" (click)="openPieceDialog(piece)" class="piece">
            <img [src]="piece.images.main.low" class="image"/>
            <div class="name-blur"></div>
            <div class="name">
                <p>{{ piece.name}}</p>
            </div>
        </div>
        <div *ngIf="pieces.length > 0 && filterPieces(pieces).length === 0">
            No pieces were found with your filter.
        </div>
        <div *ngIf="pieces.length === 0">
            No pieces were yet uploaded.
        </div>
    </div>

</div>
<div *ngIf="!(artist$ | async)">
    <app-toolbar
            title="Chargement"
            [showBackButton]="true"
    ></app-toolbar>
    <app-loading-spinner text="Chargement de l'artiste...">
    </app-loading-spinner>
</div>
